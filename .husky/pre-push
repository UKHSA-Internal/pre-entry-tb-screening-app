#!/bin/bash

pnpm -r lint

branch_name=$(git symbolic-ref --short HEAD)

# Define the branch naming pattern
pattern="^feature/TBBETA-[0-9]+(-[a-z0-9-]+)?$"

# Check if the branch name follows the convention
if [[ ! $branch_name =~ $pattern ]]; then
    echo "❌ ERROR: Branch name '$branch_name' does not follow the required convention:"
    echo "   Expected format: feature/{ticket-number}-{short-description}"
    echo "   Example: feature/TBBETA-123-add-authentication"
    exit 1
fi

echo "✅ Branch name '$branch_name' follows the required convention."
exit 0
